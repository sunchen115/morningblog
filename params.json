{"name":"Morningblog","tagline":"activerecord mysql","body":"# ruby使用activerecord与mysql交互\r\n为了防止多线程的app创建过多链接，导致mysql链接数满。activerecord引进线程池概念，即：一个app只能创建限定的链接，且这些链接被多线程复用\r\n\r\n## 连接池connections\r\n每创建一个线程，线程就会放进线程池\r\n## 线程cache\r\ncache是一个key value的hash，key是线程唯一标示，value是可用的连接。\r\n\r\n# 获取连接的过程\r\n1. 查cache\r\n2. connections non-wait pop\r\n3. 如果没有达到连接上限，创建新连接； 否则wait connections pop","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}